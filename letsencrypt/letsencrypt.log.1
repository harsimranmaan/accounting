2018-10-26 13:10:13,810:DEBUG:certbot.main:certbot version: 0.27.1
2018-10-26 13:10:13,811:DEBUG:certbot.main:Arguments: ['--manual', '-d', 'stage701.sapjamcustomdomain.com', '-m', 'harsimran.maan@sap.com', '--agree-tos', '--config-dir=letsencrypt', '--work-dir=letsencrypt', '--logs-dir=letsencrypt', '--preferred-challenges=dns']
2018-10-26 13:10:13,811:DEBUG:certbot.main:Discovered plugins: PluginsRegistry(PluginEntryPoint#apache,PluginEntryPoint#manual,PluginEntryPoint#nginx,PluginEntryPoint#null,PluginEntryPoint#standalone,PluginEntryPoint#webroot)
2018-10-26 13:10:13,848:DEBUG:certbot.log:Root logging level set at 20
2018-10-26 13:10:13,849:INFO:certbot.log:Saving debug log to /Users/i840172/hsm/github.com/harsimranman/accounting/letsencrypt/letsencrypt.log
2018-10-26 13:10:13,849:DEBUG:certbot.plugins.selection:Requested authenticator manual and installer None
2018-10-26 13:10:13,853:DEBUG:certbot.plugins.selection:Single candidate plugin: * manual
Description: Manual configuration or run your own shell scripts
Interfaces: IAuthenticator, IPlugin
Entry point: manual = certbot.plugins.manual:Authenticator
Initialized: <certbot.plugins.manual.Authenticator object at 0x10d6b1c50>
Prep: True
2018-10-26 13:10:13,853:DEBUG:certbot.plugins.selection:Selected authenticator <certbot.plugins.manual.Authenticator object at 0x10d6b1c50> and installer None
2018-10-26 13:10:13,853:INFO:certbot.plugins.selection:Plugins selected: Authenticator manual, Installer None
2018-10-26 13:10:13,964:DEBUG:acme.client:Sending GET request to https://acme-v02.api.letsencrypt.org/directory.
2018-10-26 13:10:14,148:DEBUG:urllib3.connectionpool:Starting new HTTPS connection (1): acme-v02.api.letsencrypt.org:443
2018-10-26 13:10:14,367:DEBUG:urllib3.connectionpool:https://acme-v02.api.letsencrypt.org:443 "GET /directory HTTP/1.1" 200 658
2018-10-26 13:10:14,368:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Content-Type: application/json
Content-Length: 658
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800
Expires: Fri, 26 Oct 2018 20:10:14 GMT
Cache-Control: max-age=0, no-cache, no-store
Pragma: no-cache
Date: Fri, 26 Oct 2018 20:10:14 GMT
Connection: keep-alive

{
  "6Dwt61OKffw": "https://community.letsencrypt.org/t/adding-random-entries-to-the-directory/33417",
  "keyChange": "https://acme-v02.api.letsencrypt.org/acme/key-change",
  "meta": {
    "caaIdentities": [
      "letsencrypt.org"
    ],
    "termsOfService": "https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf",
    "website": "https://letsencrypt.org"
  },
  "newAccount": "https://acme-v02.api.letsencrypt.org/acme/new-acct",
  "newNonce": "https://acme-v02.api.letsencrypt.org/acme/new-nonce",
  "newOrder": "https://acme-v02.api.letsencrypt.org/acme/new-order",
  "revokeCert": "https://acme-v02.api.letsencrypt.org/acme/revoke-cert"
}
2018-10-26 13:10:14,368:DEBUG:acme.client:Requesting fresh nonce
2018-10-26 13:10:14,368:DEBUG:acme.client:Sending HEAD request to https://acme-v02.api.letsencrypt.org/acme/new-acct.
2018-10-26 13:10:14,454:DEBUG:urllib3.connectionpool:https://acme-v02.api.letsencrypt.org:443 "HEAD /acme/new-acct HTTP/1.1" 405 0
2018-10-26 13:10:14,455:DEBUG:acme.client:Received response:
HTTP 405
Server: nginx
Content-Type: application/problem+json
Content-Length: 103
Allow: POST
Replay-Nonce: F989NkIB9m8aUVMsBpxR2rqUHk3ZKDhGCrO2ChdNvDE
Expires: Fri, 26 Oct 2018 20:10:14 GMT
Cache-Control: max-age=0, no-cache, no-store
Pragma: no-cache
Date: Fri, 26 Oct 2018 20:10:14 GMT
Connection: keep-alive


2018-10-26 13:10:14,455:DEBUG:acme.client:Storing nonce: F989NkIB9m8aUVMsBpxR2rqUHk3ZKDhGCrO2ChdNvDE
2018-10-26 13:10:14,456:DEBUG:acme.client:JWS payload:
b'{\n  "contact": [\n    "mailto:harsimran.maan@sap.com"\n  ],\n  "termsOfServiceAgreed": true,\n  "resource": "new-reg"\n}'
2018-10-26 13:10:14,460:DEBUG:acme.client:Sending POST request to https://acme-v02.api.letsencrypt.org/acme/new-acct:
{
  "protected": "eyJhbGciOiAiUlMyNTYiLCAiandrIjogeyJuIjogIm9iRjFZRVU2UUxEcUNnTDg1QkpKLTJPMlhIamdpX0xuUWlDMXF4X1FoQnR6WFRYYklLcDFhVHh1Uy1uQ0d0UTdub0U2eHRPOE10OHlEQ0ptZkZUTUEzNm9RdmxIa2ZoNGdBRnZ4T3dhbXo5UjZ4ZUw4QnhqekhBRHJIb0FqOVpYR2h0YXNWd3lYZkxSSkdWWXNaWXY0ZmNzLXdWeDR4SkM3M2dXSk1NVXc0ZENETXItZjljckl5bFFLRWE5SVNfaE53eFRPOFVUcTFUaUJJME1qVWppd1hjanJzVXhRaXQyY0ZpLTdvRjhhUWtjSzVpdEJtcDFkUkJzaUZtUHJhOFNXYk1rR3FFWHU5dEtOYm1yOUNQeVRFTFg2dHg0ZWlOQlhwWDVTamVBcTBqdzhUUVozeWpFZEwwSmZqd2hDSDVIUWsxTWFSVDMzRkJEYjNjT2Vua05wdyIsICJlIjogIkFRQUIiLCAia3R5IjogIlJTQSJ9LCAibm9uY2UiOiAiRjk4OU5rSUI5bThhVVZNc0JweFIycnFVSGszWktEaEdDck8yQ2hkTnZERSIsICJ1cmwiOiAiaHR0cHM6Ly9hY21lLXYwMi5hcGkubGV0c2VuY3J5cHQub3JnL2FjbWUvbmV3LWFjY3QifQ",
  "signature": "MQ2_kPpiSb27_J8haqak6bzqOegGl309EipHK4Kw5wLvijYpIUnoxLw-J_hOrAJOwgCDcy_wAK288yS9dlkF_wV5K8UrEcKSouxN_JW70aUWgip7PDVQtZiWRiD9Cha9Q0rjdsKAxEF433PmI7nmz-B_w8yv7rpiZKjwZ0TgOMB3-okCuTKLgU6FsRyLdnGTzvMLT3NCYRV41fEq-WpKKiFcVPkSWE8uWlLKoZhQNQmKBdC-wrKSLM2NlSEd8P3fhR9s0KR2f63Py0yU44vb0XBSl9PZLj7lxEFkuqM3w6tnteY0xMP-7uRfTlyYY7L9tUfp1UFxgxdMzVCUu9dsrw",
  "payload": "ewogICJjb250YWN0IjogWwogICAgIm1haWx0bzpoYXJzaW1yYW4ubWFhbkBzYXAuY29tIgogIF0sCiAgInRlcm1zT2ZTZXJ2aWNlQWdyZWVkIjogdHJ1ZSwKICAicmVzb3VyY2UiOiAibmV3LXJlZyIKfQ"
}
2018-10-26 13:10:14,550:DEBUG:urllib3.connectionpool:https://acme-v02.api.letsencrypt.org:443 "POST /acme/new-acct HTTP/1.1" 201 584
2018-10-26 13:10:14,551:DEBUG:acme.client:Received response:
HTTP 201
Server: nginx
Content-Type: application/json
Content-Length: 584
Boulder-Requester: 44571041
Link: <https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf>;rel="terms-of-service"
Location: https://acme-v02.api.letsencrypt.org/acme/acct/44571041
Replay-Nonce: BA6-C7M2AeTPrs6Sgz8FB3EBNA7PcmRM-6B88f_bAWo
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800
Expires: Fri, 26 Oct 2018 20:10:14 GMT
Cache-Control: max-age=0, no-cache, no-store
Pragma: no-cache
Date: Fri, 26 Oct 2018 20:10:14 GMT
Connection: keep-alive

{
  "id": 44571041,
  "key": {
    "kty": "RSA",
    "n": "obF1YEU6QLDqCgL85BJJ-2O2XHjgi_LnQiC1qx_QhBtzXTXbIKp1aTxuS-nCGtQ7noE6xtO8Mt8yDCJmfFTMA36oQvlHkfh4gAFvxOwamz9R6xeL8BxjzHADrHoAj9ZXGhtasVwyXfLRJGVYsZYv4fcs-wVx4xJC73gWJMMUw4dCDMr-f9crIylQKEa9IS_hNwxTO8UTq1TiBI0MjUjiwXcjrsUxQit2cFi-7oF8aQkcK5itBmp1dRBsiFmPra8SWbMkGqEXu9tKNbmr9CPyTELX6tx4eiNBXpX5SjeAq0jw8TQZ3yjEdL0JfjwhCH5HQk1MaRT33FBDb3cOenkNpw",
    "e": "AQAB"
  },
  "contact": [
    "mailto:harsimran.maan@sap.com"
  ],
  "initialIp": "169.145.120.32",
  "createdAt": "2018-10-26T20:10:14.609760405Z",
  "status": "valid"
}
2018-10-26 13:10:14,551:DEBUG:acme.client:Storing nonce: BA6-C7M2AeTPrs6Sgz8FB3EBNA7PcmRM-6B88f_bAWo
2018-10-26 13:10:14,716:DEBUG:certbot.reporter:Reporting to user: Your account credentials have been saved in your Certbot configuration directory at /Users/i840172/hsm/github.com/harsimranman/accounting/letsencrypt. You should make a secure backup of this folder now. This configuration directory will also contain certificates and private keys obtained by Certbot so making regular backups of this folder is ideal.
2018-10-26 13:10:20,577:DEBUG:certbot.main:Picked account: <Account(RegistrationResource(body=Registration(key=JWKRSA(key=<ComparableRSAKey(<cryptography.hazmat.backends.openssl.rsa._RSAPublicKey object at 0x10d9957b8>)>), contact=('mailto:harsimran.maan@sap.com',), agreement=None, status='valid', terms_of_service_agreed=None, only_return_existing=None), uri='https://acme-v02.api.letsencrypt.org/acme/acct/44571041', new_authzr_uri=None, terms_of_service='https://letsencrypt.org/documents/LE-SA-v1.2-November-15-2017.pdf'), 36bc5b3f6911fc1588ece164e812dd91, Meta(creation_dt=datetime.datetime(2018, 10, 26, 20, 10, 14, tzinfo=<UTC>), creation_host='C02WJ3J7HTDF'))>
2018-10-26 13:10:20,578:INFO:certbot.main:Obtaining a new certificate
2018-10-26 13:10:20,671:DEBUG:certbot.crypto_util:Generating key (2048 bits): /Users/i840172/hsm/github.com/harsimranman/accounting/letsencrypt/keys/0000_key-certbot.pem
2018-10-26 13:10:20,672:DEBUG:certbot.crypto_util:Creating CSR: /Users/i840172/hsm/github.com/harsimranman/accounting/letsencrypt/csr/0000_csr-certbot.pem
2018-10-26 13:10:20,673:DEBUG:acme.client:JWS payload:
b'{\n  "identifiers": [\n    {\n      "type": "dns",\n      "value": "stage701.sapjamcustomdomain.com"\n    }\n  ],\n  "status": "pending",\n  "resource": "new-order"\n}'
2018-10-26 13:10:20,674:DEBUG:acme.client:Sending POST request to https://acme-v02.api.letsencrypt.org/acme/new-order:
{
  "protected": "eyJhbGciOiAiUlMyNTYiLCAia2lkIjogImh0dHBzOi8vYWNtZS12MDIuYXBpLmxldHNlbmNyeXB0Lm9yZy9hY21lL2FjY3QvNDQ1NzEwNDEiLCAibm9uY2UiOiAiQkE2LUM3TTJBZVRQcnM2U2d6OEZCM0VCTkE3UGNtUk0tNkI4OGZfYkFXbyIsICJ1cmwiOiAiaHR0cHM6Ly9hY21lLXYwMi5hcGkubGV0c2VuY3J5cHQub3JnL2FjbWUvbmV3LW9yZGVyIn0",
  "signature": "hza8PvRxB2sLv-UKEQX9H3mw_jceGcLHQ3dbpY_-jHe0i-ABlCuGyt-g1bvFGW28CaGl4WSOTu2KMm-S0a1fzZo8ghjI54f7gnVJ4pLxnvdNcKcu0Sm-7hzkkxrtax-cU8KghjK5YNon5YpsIGcUsQpR3IO2dk3IfUgGAQYc6dXCI5dHXeQod_CTqIigSaOWcbXTRbEGD5p5ni8uaGHIISv2gZuA_O7GYSljlOL0kDZP0lrsAnjJh1S8ZOfe8IF2Dus2tWSNbRuq7OOvp-EWCR2X_f3xAyLLQez36Q-tWdwwmJWLwwd3Jnz4Xno9SduPZ1wCNk0N9PQqrSCR4qNNUA",
  "payload": "ewogICJpZGVudGlmaWVycyI6IFsKICAgIHsKICAgICAgInR5cGUiOiAiZG5zIiwKICAgICAgInZhbHVlIjogInN0YWdlNzAxLnNhcGphbWN1c3RvbWRvbWFpbi5jb20iCiAgICB9CiAgXSwKICAic3RhdHVzIjogInBlbmRpbmciLAogICJyZXNvdXJjZSI6ICJuZXctb3JkZXIiCn0"
}
2018-10-26 13:10:20,784:DEBUG:urllib3.connectionpool:https://acme-v02.api.letsencrypt.org:443 "POST /acme/new-order HTTP/1.1" 201 390
2018-10-26 13:10:20,785:DEBUG:acme.client:Received response:
HTTP 201
Server: nginx
Content-Type: application/json
Content-Length: 390
Boulder-Requester: 44571041
Location: https://acme-v02.api.letsencrypt.org/acme/order/44571041/139043819
Replay-Nonce: OdD7T5SZD3dM0crnGavyJgVL2NQ_2tJfrNPS9Dz3wxQ
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800
Expires: Fri, 26 Oct 2018 20:10:20 GMT
Cache-Control: max-age=0, no-cache, no-store
Pragma: no-cache
Date: Fri, 26 Oct 2018 20:10:20 GMT
Connection: keep-alive

{
  "status": "pending",
  "expires": "2018-11-02T20:10:20.834876916Z",
  "identifiers": [
    {
      "type": "dns",
      "value": "stage701.sapjamcustomdomain.com"
    }
  ],
  "authorizations": [
    "https://acme-v02.api.letsencrypt.org/acme/authz/0hNYZsLQlMKqe87Rz20tmnLkQQI1gyEW7l6-w-OneD4"
  ],
  "finalize": "https://acme-v02.api.letsencrypt.org/acme/finalize/44571041/139043819"
}
2018-10-26 13:10:20,785:DEBUG:acme.client:Storing nonce: OdD7T5SZD3dM0crnGavyJgVL2NQ_2tJfrNPS9Dz3wxQ
2018-10-26 13:10:20,787:DEBUG:acme.client:Sending GET request to https://acme-v02.api.letsencrypt.org/acme/authz/0hNYZsLQlMKqe87Rz20tmnLkQQI1gyEW7l6-w-OneD4.
2018-10-26 13:10:20,872:DEBUG:urllib3.connectionpool:https://acme-v02.api.letsencrypt.org:443 "GET /acme/authz/0hNYZsLQlMKqe87Rz20tmnLkQQI1gyEW7l6-w-OneD4 HTTP/1.1" 200 923
2018-10-26 13:10:20,873:DEBUG:acme.client:Received response:
HTTP 200
Server: nginx
Content-Type: application/json
Content-Length: 923
X-Frame-Options: DENY
Strict-Transport-Security: max-age=604800
Expires: Fri, 26 Oct 2018 20:10:20 GMT
Cache-Control: max-age=0, no-cache, no-store
Pragma: no-cache
Date: Fri, 26 Oct 2018 20:10:20 GMT
Connection: keep-alive

{
  "identifier": {
    "type": "dns",
    "value": "stage701.sapjamcustomdomain.com"
  },
  "status": "pending",
  "expires": "2018-11-02T20:10:20Z",
  "challenges": [
    {
      "type": "dns-01",
      "status": "pending",
      "url": "https://acme-v02.api.letsencrypt.org/acme/challenge/0hNYZsLQlMKqe87Rz20tmnLkQQI1gyEW7l6-w-OneD4/8663094152",
      "token": "NEEgEyjboahUWUfsRrPI8Byjn4ETMtYdYGdPvXYwFfM"
    },
    {
      "type": "tls-alpn-01",
      "status": "pending",
      "url": "https://acme-v02.api.letsencrypt.org/acme/challenge/0hNYZsLQlMKqe87Rz20tmnLkQQI1gyEW7l6-w-OneD4/8663094153",
      "token": "MfU12rvzhHyJyTHcTolta0DFgoybFIEboPmq5VoWeU4"
    },
    {
      "type": "http-01",
      "status": "pending",
      "url": "https://acme-v02.api.letsencrypt.org/acme/challenge/0hNYZsLQlMKqe87Rz20tmnLkQQI1gyEW7l6-w-OneD4/8663094154",
      "token": "a8tmKM0K9vQvLUQ0G7CGRScyDLe3YhMwdR9uiaVbmS0"
    }
  ]
}
2018-10-26 13:10:20,873:INFO:certbot.auth_handler:Performing the following challenges:
2018-10-26 13:10:20,874:INFO:certbot.auth_handler:dns-01 challenge for stage701.sapjamcustomdomain.com
2018-10-26 13:10:24,279:DEBUG:certbot.error_handler:Encountered exception:
Traceback (most recent call last):
  File "/usr/local/Cellar/certbot/0.27.1/libexec/lib/python3.7/site-packages/certbot/auth_handler.py", line 75, in handle_authorizations
    resp = self._solve_challenges(aauthzrs)
  File "/usr/local/Cellar/certbot/0.27.1/libexec/lib/python3.7/site-packages/certbot/auth_handler.py", line 126, in _solve_challenges
    resp = self.auth.perform(all_achalls)
  File "/usr/local/Cellar/certbot/0.27.1/libexec/lib/python3.7/site-packages/certbot/plugins/manual.py", line 143, in perform
    self._verify_ip_logging_ok()
  File "/usr/local/Cellar/certbot/0.27.1/libexec/lib/python3.7/site-packages/certbot/plugins/manual.py", line 173, in _verify_ip_logging_ok
    raise errors.PluginError('Must agree to IP logging to proceed')
certbot.errors.PluginError: Must agree to IP logging to proceed

2018-10-26 13:10:24,279:DEBUG:certbot.error_handler:Calling registered functions
2018-10-26 13:10:24,279:INFO:certbot.auth_handler:Cleaning up challenges
2018-10-26 13:10:24,280:DEBUG:certbot.log:Exiting abnormally:
Traceback (most recent call last):
  File "/usr/local/bin/certbot", line 11, in <module>
    load_entry_point('certbot==0.27.1', 'console_scripts', 'certbot')()
  File "/usr/local/Cellar/certbot/0.27.1/libexec/lib/python3.7/site-packages/certbot/main.py", line 1364, in main
    return config.func(config, plugins)
  File "/usr/local/Cellar/certbot/0.27.1/libexec/lib/python3.7/site-packages/certbot/main.py", line 1254, in certonly
    lineage = _get_and_save_cert(le_client, config, domains, certname, lineage)
  File "/usr/local/Cellar/certbot/0.27.1/libexec/lib/python3.7/site-packages/certbot/main.py", line 120, in _get_and_save_cert
    lineage = le_client.obtain_and_enroll_certificate(domains, certname)
  File "/usr/local/Cellar/certbot/0.27.1/libexec/lib/python3.7/site-packages/certbot/client.py", line 391, in obtain_and_enroll_certificate
    cert, chain, key, _ = self.obtain_certificate(domains)
  File "/usr/local/Cellar/certbot/0.27.1/libexec/lib/python3.7/site-packages/certbot/client.py", line 334, in obtain_certificate
    orderr = self._get_order_and_authorizations(csr.data, self.config.allow_subset_of_names)
  File "/usr/local/Cellar/certbot/0.27.1/libexec/lib/python3.7/site-packages/certbot/client.py", line 370, in _get_order_and_authorizations
    authzr = self.auth_handler.handle_authorizations(orderr, best_effort)
  File "/usr/local/Cellar/certbot/0.27.1/libexec/lib/python3.7/site-packages/certbot/auth_handler.py", line 75, in handle_authorizations
    resp = self._solve_challenges(aauthzrs)
  File "/usr/local/Cellar/certbot/0.27.1/libexec/lib/python3.7/site-packages/certbot/auth_handler.py", line 126, in _solve_challenges
    resp = self.auth.perform(all_achalls)
  File "/usr/local/Cellar/certbot/0.27.1/libexec/lib/python3.7/site-packages/certbot/plugins/manual.py", line 143, in perform
    self._verify_ip_logging_ok()
  File "/usr/local/Cellar/certbot/0.27.1/libexec/lib/python3.7/site-packages/certbot/plugins/manual.py", line 173, in _verify_ip_logging_ok
    raise errors.PluginError('Must agree to IP logging to proceed')
certbot.errors.PluginError: Must agree to IP logging to proceed
